FROM node:20-alpine
WORKDIR /app
ARG NEXT_PUBLIC_API_URL=http://localhost:3000
ENV NEXT_PUBLIC_API_URL=$NEXT_PUBLIC_API_URL
COPY apps/admin/package*.json ./
RUN npm ci --omit=dev 2>/dev/null || npm install --omit=dev
COPY apps/admin/ .
RUN npm run build
EXPOSE 3001
CMD ["npm", "run", "start"]
